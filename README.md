Introspy-Android
========

Blackbox tool to help understand what an Android application is doing at runtime
and assist in the identification of potential security issues.


Description
-----------

Introspy-Android comprises two separate components: a GUI interface to configure 
hooks, filters and options and a Cydia Substrate extension containing the core of 
the tool functionalities, including hooks and analysis of potential issues.

Introspy-Android can be installed on a jailbroken device and dynamically
configured to hook security-sensitive Android APIs at run-time. The tool records
all the relevant API calls made by an application, including function calls, arguments 
and return values. It then perform tests for security issues in real time and persists 
the results in a database and in the Android logging system.

The Introspy analyzer can then be used to analyze a database generated by the
tracer, and generate HTML reports containing the list of logged function calls
as well as a list of potential vulnerabilities affecting the application.

See http://isecpartners.github.io/introspy-android/ for a quick introduction.

Usage
---------------

Users should first root their phones using publicly available documentation
depending on their phone's model. Cydia Substrate must then be installed.

### Dependencies

The tracer will only run on a rooted device. Make sure Cydia Substrate is installed and is compatible for your device.

### How to install

* Install Cydia substrate. Cydia Substrate needs to be installed and can be 
found on Google Play (https://play.google.com/store/apps/details?id=com.saurik.substrate&hl=en). You need to install it on a compatible device and make sure the substrate files are properly linked with your device.

* Install Introspy-Android Core.apk on a device where Cydia Substrate is installed with:

        adb install Introspy-Android Core.apk

* Install Introspy-Android Config.apk on a device where Cydia Substrate is installed with:

        adb install Introspy-Android Config.apk

The Instrospy-Android Config application displays apps the Core application will hook and the
various filters and options applied to them. The changes are dynamic and you do not need to 
restard the applications for them to be effective.

### How to uninstall

        adb uninstall com.introspy.core
        adb uninstall com.introspy.config

### What if the extension crashes
This tool has not been tested on all versions of Android. If the tool does not work on your version, please send us your error logs by doing:

        adb logcat -s "InstrospyError"

If due to the error the phone does not boot anymore, you can still connect to it via adb and remove the extension with:

        adb shell su -c rm /data/app/com.introspy.core*

Reporting
-----------------

#### Reporting

* Relevant data including potential issues related to the APIs hooked is dumped in
a database and in the system logs. You can do the following commands to display them:

* Display the complete logs:

        adb logcat -s "Instrospy"
        
* Display potential issues:

        adb logcat -s "Instrospy"
        
* Use the Android version of the analyzer (TBD, it will be pushed to a different 
github repository soon) to generate an HTML formatted report.

### Display relevant call stacks

Checking the "STACK TRACES" option within the Config tool will dump a relevant call 
stack (comprizing of 3 calls) for the selected filters.

Doing It Yourself
-----------------

### Building From Source

Most users should just download and install the pre-compiled packages.
However, if you want to modify the tool's functionality you will have to
clone the source repository and build the packages yourself.

    git clone https://github.com/iSECPartners/introspy-android.git

### Adding hooks
See http://isecpartners.github.io/introspy-android/ for instructions.

License
-------

See ./LICENSE.

Author
-------

* Marc Blanchou
